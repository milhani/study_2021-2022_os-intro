---
## Front matter
title: "Лабораторная работа №12"
author: "Ханина Людмила Константиновна"

## Generic otions
lang: ru-RU

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Изучить основы программирования в оболочке ОС UNIX. Научиться писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.

# Задание

* Написать командный файл, реализующий упрощённый механизм семафоров. Командный файл должен в течение некоторого времени t1 дожидаться освобождения ресурса, выдавая об этом сообщение, а дождавшись его освобождения, использовать его в течение некоторого времени t2<>t1, также выдавая информацию о том, что ресурс используется соответствующим командным файлом (процессом). Запустить командный файл в одном виртуальном терминале в фоновом режиме, перенаправив его вывод в другой (> /dev/tty#, где # — номер терминала куда перенаправляется вывод), в котором также запущен этот файл, но не фоновом, а в привилегированном режиме. Доработать программу так, чтобы имелась возможность взаимодействия трёх и более процессов.
* Реализовать команду man с помощью командного файла. Изучите содержимое каталога /usr/share/man/man1. В нем находятся архивы текстовых файлов, содержащих справку по большинству установленных в системе программ и команд. Каждый архив можно открыть командой less сразу же просмотрев содержимое справки. Командный файл должен получать в виде аргумента командной строки название команды и в виде результата выдавать справку об этой команде или сообщение об отсутствии справки, если соответствующего файла нет в каталоге man1.
* Используя встроенную переменную $RANDOM, напишите командный файл, генерирующий случайную последовательность букв латинского алфавита. Учтите, что $RANDOM выдаёт псевдослучайные числа в диапазоне от 0 до 32767.

# Выполнение лабораторной работы

1. Cоздадим файл lab121.sh и запишем в него скрипт, реализующий упрощённый механизм семафоров. Изменим доступ к файлу, чтобы можно было его запускать.

![Первый скрипт](image/1.1.png){ #fig:001 width=70% }

2. Проверим, что он работает. Запустим.  

![Запускаем первый скрипт](image/1.2.png){ #fig:001 width=70% }

3. Далее посмотрим на содержимое файла /usr/share/man/man1. 

![Cодержимое файла /usr/share/man/man1](image/2.1.png){ #fig:001 width=70% }

4. Далее создадим файл lab122.sh. Запишем скрипт, который будет искать введенное слово в каталоге /usr/share/man/man1 и выводить содержимое, то есть справку о команде. Изменим доступ к файлу lab122.sh, чтобы можно было его запускать.

![Второй скрипт](image/2.2.png){ #fig:001 width=70% }

5. Теперь запустим файл и увидим, что программа отработала корректно.

![Запускаем второй скрипт часть 1](image/2.3.png){ #fig:001 width=70% }

![Запускаем второй скрипт часть 2](image/2.4.png){ #fig:001 width=70% }

5. Cоздадим файл lab123.sh и запишем в него скрипт, генерирующий случайную последовательность букв латинского алфавита. 

![Третий скрипт](image/3.1.png){ #fig:001 width=70% }

6. Теперь запустим файл и увидим, что программа отработала корректно.

![Запускаем третий скрипт](image/3.2.png){ #fig:001 width=70% }

# Контрольные вопросы

1. Команда getopts является встроенной командой командной оболочки bash, предназначенной для разбора параметров сценариев. Она обрабатывает исключительно однобуквенные параметры как с аргументами, так и без них и этого вполне достаточно для передачи сценариям любых входных данных.

2. При генерации имен используют метасимволы:
* '*' —	произвольная (возможно пустая) последовательность символов;
* ? — один произвольный символ;
* [...]	— любой из символов, указанных в скобках перечислением и/или с указанием диапазона;
* cat f* — выдаст все файлы каталога, начинающиеся с "f";
* cat *f* — выдаст все файлы, содержащие "f";
* cat program.?	– выдаст файлы данного каталога с однобуквенными расширениями, скажем * "program.c" и "program.o", но не выдаст "program.com";
* cat [a-d]* – выдаст файлы, которые начинаются с "a", "b", "c", "d". 

3. Операторы управления действиями: if, for, while, case. 

4. Чтобы прервать цикл, можно использовать оператор break. 

5. Операция сравнения возвращает: значение true («истина»), если высказывание с оператором правдивое (условие выполняется), и false («ложь») — если высказывание с оператором ложное (условие не выполняется).

6. Строка if test -f man$s/$i.$s проверяет, существует ли файл man$s/$i.$s и является ли этот файл обычным файлом. Если данный файл является каталогом, то команда вернет false.

7. Цикл while выполняет тело цикла пока условие истинно. Цикл until выполняет тело цикла пока условие ложно.

# Выводы

Я научилась писать более сложные командный файлы с использованием логических управляющих конструкций и циклов. 
